# Реформирование системы ограничений на турнирах: от лимита сборников к балансу MMR

## Введение

В современных реалиях во внутривузком берспортивном сообществе вопрос сбалансированного формирования команд на турнирах остаётся открытым. Традиционный подход с ограничением количества "сборников" (игроков высокого ранга) в команде имеет ряд существенных недостатков. В данной статье предлагается альтернативный метод — внедрение ограничения на суммарный MMR команды, который способен обеспечить более справедливый баланс сил и разнообразие составов.

## Проблемы существующей системы

Текущая система ограничений по количеству сборников сталкивается с несколькими принципиальными проблемами:

1. **Бинарная классификация игроков**: деление на "сборников" и "не-сборников" создаёт искусственный порог, не отражающий плавную градацию навыков. Игрок с рейтингом чуть выше рейтига "сборника" не приравнивается к ним а считается обычным игроком.

2. **Неравномерность составов**: команды с одинаковым количеством сборников могут иметь радикально разный уровень силы. Например, команда с двумя игроками на нижней границе категории "сборник" значительно слабее команды с двумя топ-игроками.

## Преимущества системы ограничений по суммарному MMR

Переход к системе с ограничением суммарного MMR команды предлагает следующие улучшения:

1. **Гибкость формирования составов**: команды смогут включать как высокоранговых, так и игроков среднего уровня в различных комбинациях, не выходя за рамки общего ограничения.

2. **Справедливый баланс**: команды с одинаковой суммой MMR теоретически должны иметь сопоставимый уровень навыков.

3. **Снижение мотивации к манипуляциям**: поскольку учитывается каждый пункт MMR, преимущество от незначительного снижения рейтинга минимально.

## Механизм реализации

Реализация системы ограничений по суммарному MMR может выглядеть следующим образом:

1. **Определение базового MMR**: использование официального рейтинга игры или специальной формулы для расчёта индивидуального MMR каждого игрока.

2. **Установление лимита для турнира**: организаторы определяют максимально допустимую сумму MMR для команды исходя из уровня турнира.

3. **Верификация составов**: перед началом турнира проверяется соответствие суммарного MMR команды установленному лимиту.

## Примеры применения

**Пример 1**: Турнир с ограничением в 25,000 MMR на команду из 5 человек.
- Команда А: 6000 + 5500 + 5000 + 4500 + 4000 = 25,000 MMR (сбалансированный состав)
- Команда Б: 7000 + 6000 + 5000 + 4000 + 3000 = 25,000 MMR (два сильных игрока + поддержка)
- Команда В: 8000 + 7000 + 4000 + 3000 + 3000 = 25,000 MMR (два топ-игрока + игроки поддержки)

Все три команды теоретически сбалансированы по общей силе, но используют разные  подходы к формированию состава.

## Решение потенциальных проблем

1. **Определение точного MMR**: возможно использование комбинированной метрики из официального рейтинга и дополнительных показателей.

2. **Смурф-аккаунты**: ужесточение правил верификации игроков и регулярная проверка истории аккаунтов.

3. **Специализация ролей**: внедрение коэффициентов для различных позиций/ролей в игре, если это необходимо для баланса.

## Методика расчёта и фильтрации данных в программе

Для получения наиболее репрезентативных данных по MMR команд и обеспечения справедливого анализа, программа использует специальный алгоритм обработки данных:

### Принцип работы программы:

1. **Первичный анализ**: При начальной обработке записей из таблицы регистраций программа вычисляет математическое ожидание (среднее значение) MMR для всех зарегистрированных игроков.

2. **Фильтрация низких MMR**: После определения математического ожидания программа идентифицирует игроков, чьё значение MMR находится ниже этого порогового значения.

3. **Оптимизация данных**: Все игроки с MMR ниже математического ожидания удаляются из индивидуального расчёта и заменяются единым агрегированным значением.

4. **Фокус на релевантных данных**: Такой подход позволяет не учитывать игроков с низким MMR при расчёте статистических показателей для игроков более высокого уровня, что делает анализ более точным для целевой аудитории турнира.

5. **Итоговые расчёты**: На основе скорректированных данных программа формирует возможные комбинации команд и рассчитывает их суммарный MMR.

Этот метод позволяет избежать искажения статистики из-за большого количества низкоранговых игроков и сфокусироваться на балансе между командами среднего и высокого уровня, которые обычно и соревнуются за призовые места на турнирах.

## Статистические данные прошлого турнира

Анализ данных регистрации команд с прошлого турнира предоставляет информацию для определения оптимальных MMR-ограничений:

### Общая статистика:
- **Всего возможных команд из 5 игроков**: 21,111,090
- **Проанализировано комбинаций**: 1,000,001
- **Среднее MMR команды**: 29,765.52
- **Минимальное MMR команды**: 19,694.00
- **Максимальное MMR команды**: 49,600.00
- **Разница между максимальным и минимальным**: 29,906.00
- **Стандартное отклонение MMR**: 4,018.26

### Примеры реальных команд:

**Команды с низким MMR:**
- Команда с MMR 19,694.00: [3900, 4000, 3894, 3900, 4000]

**Команды с высоким MMR:**
- Команда с MMR 48,300.00: [9500, 9500, 8300, 10300, 10700]
- Команда с MMR 48,500.00: [9000, 10300, 9000, 10700, 9500]
- Команда с MMR 48,600.00: [9500, 9500, 10300, 8600, 10700]
- Команда с MMR 48,800.00: [10700, 8800, 10300, 9500, 9500]
- Команда с MMR 49,600.00: [10700, 10300, 9600, 9500, 9500]

**Команда с максимальным MMR 49,600.00**: [10700, 10300, 9600, 9500, 9500]

Данные наглядно демонстрируют значительный разброс в суммарной силе команд (почти 30,000 MMR между самой сильной и самой слабой командами). При установлении ограничения на суммарный MMR можно использовать среднее значение (около 30,000 +- 4000) или медианное значение как ориентир, с возможными корректировками в зависимости от желаемого уровня соревновательности турнира.

